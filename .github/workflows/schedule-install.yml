name: Angular Portfolio CI/CD pipeline learning

on:
  schedule:
    - cron: '0 */1 * * *' # Every 6 hours (00:00, 06:00, 12:00, 18:00 UTC)
  workflow_dispatch: # Manual trigger
  push: # Runs on pushes to main or dev
    branches: [ main, dev ]

jobs:
  build-and-lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.19.0' # Matches @angular/cli@20.3.2
      - name: Install Dependencies
        run: npm ci --legacy-peer-deps # Downloads reactive-lint
      - name: Verify reactive-lint Installation
        run: npm list reactive-lint || true # Confirms installation
      - name: Run reactive-lint
        run: npx reactive-lint src/**/*.ts || true # Adjust to actual CLI command
      - name: Run Unit Tests
        run: npm run test -- --watch=false || true
      - name: Build Angular Project
        run: npm run build -- --configuration production || true
